# 3D Network Visualization - Architecture Diagram

## System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        NEXT.JS APPLICATION                         â”‚
â”‚                          (App Router)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    DATA LAYER                               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚ â”‚
â”‚  â”‚  â”‚ models.ts    â”‚  â”‚ sample_data  â”‚  â”‚ locations.ts â”‚     â”‚ â”‚
â”‚  â”‚  â”‚              â”‚  â”‚ _extended.ts â”‚  â”‚ âš ï¸ REAL      â”‚     â”‚ â”‚
â”‚  â”‚  â”‚ Type Defs    â”‚  â”‚              â”‚  â”‚ COORDINATES  â”‚     â”‚ â”‚
â”‚  â”‚  â”‚ Interfaces   â”‚  â”‚ 120 Paradas  â”‚  â”‚              â”‚     â”‚ â”‚
â”‚  â”‚  â”‚ Enums        â”‚  â”‚ 120 Necesid. â”‚  â”‚ 6 Companies  â”‚     â”‚ â”‚
â”‚  â”‚  â”‚              â”‚  â”‚ Synergies    â”‚  â”‚ with Lat/Lon â”‚     â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚                           â†“                                  â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚         DATA PROCESSING LAYER                      â”‚    â”‚ â”‚
â”‚  â”‚  â”‚                                                     â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Enrich companies with locations                 â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Calculate relationships/connections             â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Compute connection strengths                    â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Classify node types                             â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Convert lat/lon to 3D coordinates              â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     VISUALIZATION LAYER                           â”‚
â”‚                    (React Three Fiber)                            â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    3D SCENE                              â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚         GEOGRAPHIC BASE                        â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚     MapPlane Component              â”‚      â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Vector map texture               â”‚      â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ 100x100 PlaneGeometry            â”‚      â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Toggleable visibility            â”‚      â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Green palette styling            â”‚      â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚    â”‚    â”‚
â”‚  â”‚  â”‚           Position: y = -0.1                   â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚         NODES LAYER (y = 0 to 10)             â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  GEOGRAPHIC NODES (y = 0)             â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚                                        â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Company  â”‚ â”‚ Company  â”‚  ...      â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Node    â”‚ â”‚  Node    â”‚           â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  (Box)   â”‚ â”‚  (Box)   â”‚           â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚   Argos @      Yara @                â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚   10.39,-75.48 10.41,-75.47          â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚                                        â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Provider â”‚ â”‚ Provider â”‚  ...      â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   Node   â”‚ â”‚   Node   â”‚           â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ (Sphere) â”‚ â”‚ (Sphere) â”‚           â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚                                        â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  FLOATING NODES (y = 2-5)             â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Gentle hover animation             â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Not tied to geography              â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚                                        â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Synergy  â”‚ â”‚   RFP    â”‚  ...      â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Node    â”‚ â”‚   Node   â”‚           â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚(Pyramid) â”‚ â”‚  (Cone)  â”‚           â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚                                        â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  Offer   â”‚ â”‚  Event   â”‚  ...      â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   Node   â”‚ â”‚   Node   â”‚           â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  (Octa)  â”‚ â”‚  (Ico)   â”‚           â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚      CONNECTIONS LAYER                         â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  Company â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Company        â”‚    â”‚    â”‚
â”‚  â”‚  â”‚            (synergy)                           â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  Provider â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Company       â”‚    â”‚    â”‚
â”‚  â”‚  â”‚            (supply)                            â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  Company â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º RFP           â”‚    â”‚    â”‚
â”‚  â”‚  â”‚            (participation)                     â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  Features:                                     â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ Uniform line thickness                      â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ Subtle opacity (0.3-0.5)                    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ Color-coded by type                         â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚      PARTICLE SYSTEM                           â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  Strong Connection (strength = 0.9):           â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â—â—â—â—â—â—â—â—â—â†’ (9 particles, fast)               â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  Medium Connection (strength = 0.5):           â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â—â—â—â—â—â†’ (5 particles, medium speed)           â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  Weak Connection (strength = 0.2):             â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â—â—â†’ (2 particles, slow)                      â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  Animation: useFrame() loop                    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ Update particle progress along line         â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ Loop particles back to start                â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ Interpolate position (Vector3.lerp)         â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚         LIGHTING                               â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ AmbientLight (intensity: 0.3, #9aff8d)      â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ DirectionalLight (intensity: 0.5)           â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ PointLights near nodes (optional)           â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚         CAMERA & CONTROLS                      â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ PerspectiveCamera                           â”‚    â”‚    â”‚
â”‚  â”‚  â”‚    Position: [50, 40, 50]                      â”‚    â”‚    â”‚
â”‚  â”‚  â”‚    FOV: 60Â°                                    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ OrbitControls                               â”‚    â”‚    â”‚
â”‚  â”‚  â”‚    enableDamping: true                         â”‚    â”‚    â”‚
â”‚  â”‚  â”‚    minDistance: 10                             â”‚    â”‚    â”‚
â”‚  â”‚  â”‚    maxDistance: 200                            â”‚    â”‚    â”‚
â”‚  â”‚  â”‚    maxPolarAngle: Ï€/2 (no going underground)   â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          UI OVERLAY LAYER                         â”‚
â”‚                         (React DOM Portal)                        â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Header                                                  â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚  Petrochemical Cluster 3D Network              â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Control Panel (Top Right)                              â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚  [  Show Map  ] â† Toggle Button                â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                                 â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Filters:                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â˜‘ Companies                                    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â˜‘ Providers                                    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â˜‘ Synergies                                    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â˜‘ RFPs                                         â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â˜‘ Offers                                       â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  â˜‘ Events                                       â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Info Panel (Bottom Left)                               â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚  Selected: Argos Cartagena Plant               â”‚     â”‚    â”‚
â”‚  â”‚  â”‚                                                 â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Type: Company                                  â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Location: Cartagena, Colombia                  â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Coordinates: 10.39Â°N, 75.48Â°W                  â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Connections: 12 active                         â”‚     â”‚    â”‚
â”‚  â”‚  â”‚  Synergies: 5 participating                     â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA FLOW                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. LOAD DATA
   â”œâ”€â”€ models.ts (Type definitions)
   â”œâ”€â”€ sample_data_extended.ts (Sample data)
   â””â”€â”€ locations.ts (Geographic coordinates) âš ï¸

2. PROCESS DATA
   â”œâ”€â”€ Enrich companies with locations
   â”‚   â””â”€â”€ enrichedCompanies = companies + locations
   â”‚
   â”œâ”€â”€ Calculate connections
   â”‚   â”œâ”€â”€ Company â†” Company (via synergies)
   â”‚   â”œâ”€â”€ Provider â†’ Company (via needs)
   â”‚   â”œâ”€â”€ Company â†’ RFP (via participation)
   â”‚   â””â”€â”€ Compute strength for each connection
   â”‚
   â””â”€â”€ Convert coordinates
       â””â”€â”€ (lat, lon) â†’ (x, y, z) in 3D space

3. RENDER 3D SCENE
   â”œâ”€â”€ MapPlane (geographic base)
   â”‚
   â”œâ”€â”€ For each company:
   â”‚   â”œâ”€â”€ Convert lat/lon to 3D position
   â”‚   â”œâ”€â”€ Create BoxGeometry at position
   â”‚   â””â”€â”€ Apply company color
   â”‚
   â”œâ”€â”€ For each synergy:
   â”‚   â”œâ”€â”€ Calculate floating position
   â”‚   â”œâ”€â”€ Create TetrahedronGeometry
   â”‚   â””â”€â”€ Apply hover animation
   â”‚
   â”œâ”€â”€ For each connection:
   â”‚   â”œâ”€â”€ Get start and end positions
   â”‚   â”œâ”€â”€ Create line geometry
   â”‚   â””â”€â”€ Create particle flow
   â”‚       â”œâ”€â”€ particleCount = strength Ã— 10
   â”‚       â”œâ”€â”€ particleSpeed = strength Ã— 0.5
   â”‚       â””â”€â”€ Animate particles along line
   â”‚
   â””â”€â”€ Update every frame (60 FPS)

4. HANDLE INTERACTIONS
   â”œâ”€â”€ Mouse hover â†’ highlight node
   â”œâ”€â”€ Mouse click â†’ show info panel
   â”œâ”€â”€ Camera controls â†’ rotate/zoom scene
   â””â”€â”€ Toggle map â†’ show/hide base layer
```

---

## Component Hierarchy

```
App (page.tsx)
â”‚
â”œâ”€â”€ Scene (Canvas wrapper)
â”‚   â”‚
â”‚   â”œâ”€â”€ Lighting
â”‚   â”‚   â”œâ”€â”€ AmbientLight
â”‚   â”‚   â””â”€â”€ DirectionalLight
â”‚   â”‚
â”‚   â”œâ”€â”€ Camera & Controls
â”‚   â”‚   â”œâ”€â”€ PerspectiveCamera
â”‚   â”‚   â””â”€â”€ OrbitControls
â”‚   â”‚
â”‚   â”œâ”€â”€ MapPlane
â”‚   â”‚   â””â”€â”€ PlaneGeometry + MapTexture
â”‚   â”‚
â”‚   â”œâ”€â”€ Nodes
â”‚   â”‚   â”œâ”€â”€ CompanyNode Ã— 6
â”‚   â”‚   â”œâ”€â”€ ProviderNode Ã— N
â”‚   â”‚   â”œâ”€â”€ SynergyNode Ã— M
â”‚   â”‚   â”œâ”€â”€ RFPNode Ã— K
â”‚   â”‚   â””â”€â”€ OfferNode Ã— J
â”‚   â”‚
â”‚   â”œâ”€â”€ Connections
â”‚   â”‚   â””â”€â”€ ConnectionLine Ã— Total Connections
â”‚   â”‚       â””â”€â”€ ParticleFlow (for each line)
â”‚   â”‚
â”‚   â””â”€â”€ Effects (optional)
â”‚       â”œâ”€â”€ Bloom
â”‚       â””â”€â”€ SSAO
â”‚
â”œâ”€â”€ UI Overlay (Portal)
â”‚   â”œâ”€â”€ Header
â”‚   â”œâ”€â”€ ControlPanel
â”‚   â”‚   â”œâ”€â”€ MapToggle
â”‚   â”‚   â””â”€â”€ FilterCheckboxes
â”‚   â”‚
â”‚   â””â”€â”€ InfoPanel
â”‚       â””â”€â”€ NodeDetails
```

---

## State Management Structure

```typescript
// Using Zustand for 3D state

interface VisualizationState {
  // Data
  companies: EnrichedCompany[];
  connections: Connection[];
  nodes: Node[];
  
  // UI State
  hoveredNode: string | null;
  selectedNode: string | null;
  
  // View State
  showMap: boolean;
  filters: {
    companies: boolean;
    providers: boolean;
    synergies: boolean;
    rfps: boolean;
    offers: boolean;
    events: boolean;
  };
  
  // Actions
  setHoveredNode: (id: string | null) => void;
  setSelectedNode: (id: string | null) => void;
  toggleMap: () => void;
  toggleFilter: (filter: keyof filters) => void;
}
```

---

## Performance Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PERFORMANCE OPTIMIZATION                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. GEOMETRY REUSE
   â€¢ Create geometries once in useMemo()
   â€¢ Share geometry instances across nodes
   â€¢ Use InstancedMesh for identical shapes

2. INSTANCED RENDERING
   â€¢ Company nodes â†’ InstancedMesh (Box)
   â€¢ Provider nodes â†’ InstancedMesh (Sphere)
   â€¢ Update instance matrices only when needed

3. LEVEL OF DETAIL (LOD)
   â€¢ Close nodes: High detail
   â€¢ Medium distance: Medium detail
   â€¢ Far nodes: Low detail or point sprites

4. PARTICLE OPTIMIZATION
   â€¢ Use object pooling for particles
   â€¢ Limit total particle count
   â€¢ Update only visible particles
   â€¢ Use BufferGeometry for efficiency

5. CULLING
   â€¢ Frustum culling (automatic in Three.js)
   â€¢ Occlusion culling for blocked nodes
   â€¢ Distance culling for far particles

6. CONNECTION OPTIMIZATION
   â€¢ Only render active connections
   â€¢ Use simple LineGeometry (not Line2)
   â€¢ Batch draw calls where possible

7. TEXTURE OPTIMIZATION
   â€¢ Compress map textures
   â€¢ Use mipmaps
   â€¢ Lazy load high-res versions

8. RENDER OPTIMIZATION
   â€¢ Enable shadows only for important nodes
   â€¢ Use lower resolution shadow maps
   â€¢ Limit light count (2-3 max)
   â€¢ Use baked lighting where possible
```

---

## Color Palette Visual Reference

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   COLOR PALETTE                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Background:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  #131313  Dark charcoal
                                    
Dataviz 0:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  #9aff8d  Bright lime green
             (Critical synergies, primary connections)

Dataviz 1:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  #74b600  Medium green
             (Companies)

Dataviz 2:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  #a8d564  Light olive green
             (Providers)

Dataviz 3:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  #c4e8a0  Pale green
             (Offers)

Dataviz 4:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  #f9d134  Golden yellow
             (RFPs, active events)

Dataviz 5:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  #f9a600  Bright orange
             (Alerts, critical materials)

Usage Example:
  Argos (Company)    â†’ #74b600 (dataviz-1)
  Synergy (Critical) â†’ #9aff8d (dataviz-0)
  RFP (Active)       â†’ #f9d134 (dataviz-4)
  Alert              â†’ #f9a600 (dataviz-5)
```

---

## Shape Reference Visual

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   NODE SHAPES                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

COMPANY       â”Œâ”€â”€â”€â”€â”€â”     BoxGeometry
              â”‚     â”‚     1 Ã— 1 Ã— 1 units
              â”‚     â”‚     Color: #74b600
              â””â”€â”€â”€â”€â”€â”˜     Position: On map (y=0)

PROVIDER        â—         SphereGeometry
               â•± â•²        Radius: 0.5 units
              â”‚   â”‚       Color: #a8d564
               â•² â•±        Position: On map (y=0)
                â—‹

SYNERGY         â–²         TetrahedronGeometry
               â•± â•²        Size: 0.5 units
              â•±   â•²       Color: #9aff8d
             â–”â–”â–”â–”â–”â–”       Position: Floating (y=2-5)

RFP             â–³         ConeGeometry
                â”‚         Radius: 0.5, Height: 1
               â•±â”‚â•²        Color: #f9d134
              â•± â”‚ â•²       Position: Floating (y=2-5)
             â–”â–”â–”â–”â–”â–”

OFFER           â—‡         OctahedronGeometry
               â•±â”‚â•²        Size: 0.5 units
              â•± â”‚ â•²       Color: #c4e8a0
              â–”â–”â”‚â–”â–”       Position: Floating (y=2-5)
                â”‚

EVENT           â—†         IcosahedronGeometry
              â•±â”‚â•²â”‚â•²       Size: 0.5 units
             â•± â”‚ â”‚ â•²      Color: #f9a600
            â–”â–”â–”â”‚â–”â”‚â–”â–”      Position: Floating (y=2-5)
```

---

## Geographic Coordinate System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            CARTAGENA INDUSTRIAL AREA                        â”‚
â”‚                 (Mamonal Zone)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    North (10.5Â°N)
         â–²
         â”‚
    West â”‚ East
  -75.5Â°Wâ”‚-75.4Â°W
         â”‚
         â”‚
         â–¼
    South (10.3Â°N)

Coordinate Conversion:
  Lat: 10.39Â°N  â†’  z = (10.39 - 10.3)/(10.5 - 10.3) Ã— 100 - 50
                    z = 0.45 Ã— 100 - 50 = -5
  
  Lon: -75.48Â°W â†’  x = (-75.48 - (-75.5))/(-75.4 - (-75.5)) Ã— 100 - 50
                    x = 0.2 Ã— 100 - 50 = -30

Result: Company at (x=-30, y=0, z=-5) in 3D space

Map Bounds Definition:
  const MAP_BOUNDS = {
    north: 10.5,
    south: 10.3,
    east: -75.4,
    west: -75.5
  };

3D Scene Dimensions:
  â€¢ Plane size: 100 Ã— 100 units
  â€¢ Center at origin (0, 0, 0)
  â€¢ x range: [-50, 50]
  â€¢ z range: [-50, 50]
  â€¢ y range: [-0.1 (map), 0 (ground), 10 (floating max)]
```

---

## File Structure with Examples

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ Main entry: <Canvas><Scene /></Canvas>
â”‚   â”‚
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ locations/
â”‚           â””â”€â”€ route.ts
â”‚               â””â”€â”€ GET /api/locations â†’ returns COMPANY_LOCATIONS
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”œâ”€â”€ button.tsx (shadcn)
â”‚   â”‚   â”œâ”€â”€ card.tsx (shadcn)
â”‚   â”‚   â””â”€â”€ switch.tsx (shadcn)
â”‚   â”‚
â”‚   â”œâ”€â”€ 3d/
â”‚   â”‚   â”œâ”€â”€ Scene.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Container for all 3D elements
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ MapPlane.tsx
â”‚   â”‚   â”‚   â””â”€â”€ <mesh><planeGeometry /><meshStandardMaterial /></mesh>
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ nodes/
â”‚   â”‚   â”‚   â”œâ”€â”€ Node.tsx (base component)
â”‚   â”‚   â”‚   â”œâ”€â”€ CompanyNode.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ <mesh position={latLonTo3D(lat,lon)}><boxGeometry /></mesh>
â”‚   â”‚   â”‚   â”œâ”€â”€ SynergyNode.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ <mesh position={floatingPos}><tetrahedronGeometry /></mesh>
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ connections/
â”‚   â”‚   â”‚   â”œâ”€â”€ ConnectionLine.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ <line><lineBasicMaterial /></line>
â”‚   â”‚   â”‚   â””â”€â”€ ParticleFlow.tsx
â”‚   â”‚   â”‚       â””â”€â”€ <points><bufferGeometry /></points>
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ environment/
â”‚   â”‚       â”œâ”€â”€ Lighting.tsx
â”‚   â”‚       â””â”€â”€ Camera.tsx
â”‚   â”‚
â”‚   â””â”€â”€ panels/
â”‚       â”œâ”€â”€ ControlPanel.tsx
â”‚       â”‚   â””â”€â”€ Map toggle, filters
â”‚       â”‚
â”‚       â””â”€â”€ InfoPanel.tsx
â”‚           â””â”€â”€ Node details display
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ locations.ts
â”‚   â”‚   â”‚   â””â”€â”€ export const COMPANY_LOCATIONS = [...]
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ process-data.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ enrichWithLocation()
â”‚   â”‚   â”‚   â”œâ”€â”€ calculateConnections()
â”‚   â”‚   â”‚   â””â”€â”€ calculateStrength()
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ relationships.ts
â”‚   â”‚       â””â”€â”€ Connection type definitions
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ coordinates.ts
â”‚   â”‚   â”‚   â””â”€â”€ latLonTo3D(lat, lon, elevation)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ geometry.ts
â”‚   â”‚   â”‚   â””â”€â”€ GEOMETRIES = { box, sphere, pyramid, ... }
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ colors.ts
â”‚   â”‚       â””â”€â”€ COLORS = { background, dataviz: {...} }
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ use3DNodes.ts
â”‚   â”‚   â”‚   â””â”€â”€ Custom hook to get processed node data
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ useConnections.ts
â”‚   â”‚       â””â”€â”€ Custom hook to get connection data
â”‚   â”‚
â”‚   â””â”€â”€ store/
â”‚       â””â”€â”€ visualization-store.ts
â”‚           â””â”€â”€ Zustand store for global state
â”‚
â””â”€â”€ types/
    â””â”€â”€ visualization.ts
        â”œâ”€â”€ Node
        â”œâ”€â”€ Connection
        â”œâ”€â”€ NodeType
        â””â”€â”€ ConnectionType
```

---

## Critical Implementation Notes

### âš ï¸ BEFORE CODING

1. **Research Real Coordinates**
   - Don't use placeholders!
   - Mamonal Industrial Zone, Cartagena
   - Verify each coordinate

2. **Test Coordinate Conversion**
   - Create test with known point
   - Verify it appears in correct position

3. **Verify Data Integrity**
   - Don't break existing interfaces
   - Only extend/enrich data

### ğŸ¯ While Building

1. **Shape Mapping**
   - Each category = specific shape
   - No exceptions!

2. **Uniform Lines**
   - All connections same thickness
   - Subtle, not distracting

3. **Particle Count Logic**
   ```typescript
   particleCount = Math.ceil(strength * 10)
   // strength 0.1 â†’ 1 particle
   // strength 0.5 â†’ 5 particles
   // strength 1.0 â†’ 10 particles
   ```

4. **Floating Height**
   ```typescript
   const FLOATING_HEIGHT = {
     min: 2,
     max: 5,
     hover: 0.3 // amplitude of bobbing
   };
   ```

### âœ… Before Finishing

1. Check all 6 companies render correctly
2. Verify particles flow (not just static)
3. Test map toggle works
4. Confirm colors match palette exactly
5. Test performance (60 FPS)

---

Remember: This is a **data-driven geographic visualization** where accuracy and clarity are paramount! ğŸ—ºï¸âœ¨
